# Token4Good v2 - Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env with real secrets to version control

# ============================================
# DATABASE CONFIGURATION
# ============================================

# PostgreSQL (Supabase) - Production database
DATABASE_URL=postgresql://postgres:<PASSWORD>@<HOST>:5432/<DB_NAME>

# MongoDB (Legacy) - Keep for migration period only
MONGODB_URI=mongodb://root:<PASSWORD>@<HOST>:27017/staging?authSource=admin
DB_NAME=staging

# ============================================
# BACKEND RUST SERVICE
# ============================================

# Server configuration
PORT=3000
RUST_LOG=info

# JWT Authentication
JWT_SECRET=<GENERATE_RANDOM_SECRET>
JWT_EXPIRY_HOURS=24

# ============================================
# RGB BITCOIN & LIGHTNING NETWORK
# ============================================

# Bitcoin Network (mainnet | testnet | regtest)
BITCOIN_NETWORK=regtest
BITCOIN_RPC_URL=http://bitcoin:bitcoin123@localhost:18443

# RGB Client-Side Validation — Option B (sans daemon)
# Répertoire de données RGB (stash.json + issuer.key)
RGB_DATA_DIR=/data/rgb

# Clé privée secp256k1 de l'émetteur RGB (hex 32 bytes = 64 chars)
# Générer avec: openssl rand -hex 32
# OBLIGATOIRE en production pour garantir la persistance des signatures
RGB_ISSUER_KEY=<GENERATE_WITH_openssl_rand_-hex_32>

# URL de l'API Esplora pour vérification des transactions on-chain (optionnel)
# Mainnet: https://mempool.space/api  ou  https://blockstream.info/api
# Testnet: https://mempool.space/testnet/api
# Regtest: http://localhost:3002/api  (instance esplora locale)
# Laisser vide pour désactiver la vérification UTXO
ESPLORA_URL=

# Lightning Network (LND)
LND_HOST=localhost
LND_PORT=10009
LND_MACAROON_PATH=/path/to/.lnd/data/chain/bitcoin/regtest/admin.macaroon
LND_TLS_CERT_PATH=/path/to/.lnd/tls.cert

# ============================================
# NEXTAUTH (Frontend)
# ============================================

NEXTAUTH_URL=http://localhost:4200
NEXTAUTH_SECRET=<GENERATE_RANDOM_SECRET>

# ============================================
# SUPABASE AUTHENTICATION
# ============================================

# Supabase project URL and anon key (public)
NEXT_PUBLIC_SUPABASE_URL=https://<YOUR_PROJECT_ID>.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=<YOUR_ANON_KEY>

# ============================================
# DAZNO INTEGRATION
# ============================================

# Dazno session verification (shares same Supabase users)
NEXT_PUBLIC_DAZNO_VERIFY_URL=https://dazno.de/api/auth/verify-session

# Backend API
DAZNO_LIGHTNING_API_URL=https://api.dazno.de
DAZNO_USERS_API_URL=https://dazno.de/api
DAZNO_API_KEY=<YOUR_DAZNO_API_KEY>

# ============================================
# OAUTH AUTHENTICATION (LinkedIn, t4g)
# ============================================

# Application URL (pour les redirects OAuth)
NEXT_PUBLIC_APP_URL=http://localhost:4200
NEXT_PUBLIC_API_URL=http://localhost:3000

# LinkedIn OAuth
# Obtenir sur: https://www.linkedin.com/developers/apps
LINKEDIN_CLIENT_ID=<YOUR_LINKEDIN_CLIENT_ID>
LINKEDIN_CLIENT_SECRET=<YOUR_LINKEDIN_CLIENT_SECRET>
NEXT_PUBLIC_LINKEDIN_CLIENT_ID=<YOUR_LINKEDIN_CLIENT_ID>

# GitHub OAuth
# Obtenir sur: https://github.com/settings/applications/new
# Callback URL: http://localhost:4200/auth/callback/github
GITHUB_CLIENT_ID=<YOUR_GITHUB_CLIENT_ID>
GITHUB_CLIENT_SECRET=<YOUR_GITHUB_CLIENT_SECRET>
NEXT_PUBLIC_GITHUB_CLIENT_ID=<YOUR_GITHUB_CLIENT_ID>

# t4g OAuth (si utilisé)
CLIENT_ID=<YOUR_T4G_CLIENT_ID>
CLIENT_SECRET=<YOUR_T4G_CLIENT_SECRET>
AUTH_URL=https://oauth.t4g.com
NEXT_PUBLIC_T4G_CLIENT_ID=<YOUR_T4G_CLIENT_ID>
NEXT_PUBLIC_T4G_AUTH_URL=https://oauth.t4g.com

# ============================================
# TOKEN4GOOD API KEYS (Pour Webhooks Dazno)
# ============================================

# Clé API pour que Dazno puisse appeler Token4Good
# Générer avec: openssl rand -hex 32
T4G_API_KEY=<GENERATE_RANDOM_API_KEY>

# Secret partagé pour signer les webhooks Dazno → Token4Good
# Générer avec: openssl rand -hex 64
T4G_WEBHOOK_SECRET=<GENERATE_RANDOM_SECRET>

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================

EMAIL_SERVER=smtps://<USER>:<PASSWORD>@<SMTP_HOST>:465
EMAIL_FROM="Token For Good <noreply@token-for-good.com>"
EMAIL_ADMIN=<ADMIN_EMAIL>
EMAIL_TO=<DEV_EMAIL_FOR_TESTING>

# ============================================
# LEGACY POLYGON CONTRACTS (Deprecated)
# ============================================

# NOTE: These are for migration only. New system uses RGB on Bitcoin.
FORWARDER_CONTRACT=<YOUR_CONTRACT_ADDRESS>
TOKEN_CONTRACT=<YOUR_CONTRACT_ADDRESS>
SERVICE_CATALOG_CONTRACT=<YOUR_CONTRACT_ADDRESS>
ADMIN=<YOUR_ADMIN_ADDRESS>
CHAIN_ID=80001

# Alchemy & Polygon
ALCHEMY_API_KEY=<YOUR_ALCHEMY_KEY>
ALCHEMY_NETWORK=polygon-mumbai
POLYGONSCAN_BASEURL=https://mumbai.polygonscan.com
POLYGONSCAN_API=https://api-testnet.polygonscan.com/
POLYGONSCAN_API_KEY=<YOUR_POLYGONSCAN_KEY>

# Hardhat deployment
MUMBAI_RPC=https://polygon-mumbai.g.alchemy.com/v2/<ALCHEMY_KEY>
PRIVATE_KEY=<YOUR_PRIVATE_KEY>
WALLET_ENCRYPTION_PASS=<YOUR_WALLET_PASSWORD>
ADMIN_WALLET=<YOUR_ADMIN_WALLET_PRIVATE_KEY>

# ============================================
# DEVELOPMENT / DEBUGGING
# ============================================

FAKE_AUTH=false
SENTRY_IGNORE_API_RESOLUTION_ERROR=1
SENTRY_IGNORE=true
UPDATES_URL=wss://staging.live.app.token-for-good.com
